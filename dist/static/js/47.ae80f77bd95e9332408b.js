webpackJsonp([47],{"+Yez":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Gu7T"),o=s.n(e),n=(s("Au9i"),s("CWUh")),a=s("IchT"),c={name:"retailShopIndex",data:function(){return{title:"批发商城",notes:"兑换记录",pageindex:0,classifyShow:!1,canrecruit:!1,bottomDistance:50,pageval:4,allLoaded:!1,info:{type:2,category:0,keyword:"",page:1,int:""},categoryList:[],proList:[],loading:!0}},components:{top:n.a,foot:a.a},created:function(){this.getcategoryList(),this.getProductList(this.info)},methods:{gotoShoppingCart:function(t){this.$router.push({name:"shoppingCart",params:{type:t}})},golist:function(){window.localStorage.setItem("shopType",2),this.$router.push("/shop/conversionRecord")},goproductdetail:function(t){this.$router.push({name:"productDetail",params:{id:t.id}}),window.localStorage.setItem("pid",t.id),window.localStorage.setItem("ptype",this.info.type)},loadBottom:function(){this.loading=!0,this.info.page++,this.getProductList(this.info)},checkScore:function(){"请登录"==this.$store.state.shopIndex.memberInt&&(this.$toast({message:"请登录"}),this.$router.push("/login"))},showClassify:function(){this.classifyShow=!this.classifyShow},iconChange:function(t){this.categoryList[t].iconShow=!this.categoryList[t].iconShow},changecanrecruit:function(){this.canrecruit=!this.canrecruit},changetype:function(t){this.info.type=t},changecategory:function(t){this.info.category=t},getcategoryList:function(){var t=this;this.$store.dispatch("categoryList/getcategoryList").then(function(){if(200==t.$store.state.categoryList.code){t.categoryList=t.$store.state.categoryList.list;for(var i=0;i<t.categoryList.length;i++)t.$set(t.categoryList[i],"iconShow",!1)}else t.$toast({message:t.$store.state.categoryList.msg})}).catch(function(t){console.log(t)})},getProductList:function(t){var i=this;this.$store.dispatch("shopIndex/getShopIndex",t).then(function(){200==i.$store.state.shopIndex.code?i.pageval==i.$store.state.shopIndex.dataList.length?(i.loading=!1,i.proList=[].concat(o()(i.proList),o()(i.$store.state.shopIndex.dataList))):0==i.$store.state.shopIndex.dataList.length?i.loading=!0:(i.proList=[].concat(o()(i.proList),o()(i.$store.state.shopIndex.dataList)),i.loading=!0):i.$toast({message:i.$store.state.shopIndex.msg})}).catch(function(t){console.log(t)})},getrecruitlist:function(t){this.info.int="",this.info.type=1,this.info.page=1,this.info.category=0,this.proList=[],this.getProductList(t)},getconsumeproductlist:function(t){this.info.int="",this.info.type=2,this.info.page=1,this.info.category=0,this.proList=[],this.getProductList(t)},getsearchlist:function(t){this.info.int="",this.info.page=1,this.info.category=0,13==t.keyCode&&(t.preventDefault(),this.proList=[],this.getProductList(this.info),this.info.keyword="")},getalllist:function(t){this.info.int="",this.info.page=1,this.info.category=0,this.proList=[],this.getProductList(t),this.classifyShow=!1},getbycategorylist:function(t){t.stopPropagation,this.info.int="",this.info.page=1,this.proList=[],this.getProductList(this.info),this.classifyShow=!1},getbymemberintlist:function(t){var i=this;this.info.int=this.$store.state.shopIndex.memberInt,"请登录"==this.info.int?(this.$toast({message:"您还没有登录不能查询！请登录"}),setTimeout(function(){i.$router.push("/login")},2e3)):(this.info.page=1,this.proList=[],this.getProductList(this.info))},canexchange:function(t){var i=this;this.canrecruit?setTimeout(function(){i.getalllist(t)},1e3):setTimeout(function(){i.getbymemberintlist(t)},1e3)}}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"shopIndex"}},[e("top",{attrs:{message:t.title,notes:t.notes}}),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"search"},[e("img",{attrs:{src:s("alXW")}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.keyword,expression:"info.keyword"}],attrs:{type:"search",placeholder:"搜索商品"},domProps:{value:t.info.keyword},on:{keypress:t.getsearchlist,input:function(i){i.target.composing||t.$set(t.info,"keyword",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"select_box"},[e("ul",{staticClass:"select_list"},[e("li",{on:{click:function(i){t.gotoShoppingCart(2)}}},[t._v("批发商城购物车")]),t._v(" "),e("li"),t._v(" "),e("li",[t._v("分类"),e("span",{staticClass:"triangle_border_down",on:{click:t.showClassify}}),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.classifyShow,expression:"classifyShow"}],staticClass:"classify"},[e("span",{staticClass:"triangle_border_up"}),t._v(" "),e("ul",{staticClass:"classifyList"},[e("li",{on:{click:function(i){t.getalllist(t.info)}}},[t._v("全部")]),t._v(" "),t._l(t.categoryList,function(i,o){return e("li",{key:o},[e("div",{on:{click:function(i){t.iconChange(o)}}},[e("b",{on:{click:function(s){t.changecategory(i.id),t.getbycategorylist(o)}}},[t._v(t._s(i.title))]),e("img",{directives:[{name:"show",rawName:"v-show",value:i.iconShow,expression:"item.iconShow"}],attrs:{src:s("LP6M")}}),e("img",{directives:[{name:"show",rawName:"v-show",value:!i.iconShow,expression:"!item.iconShow"}],attrs:{src:s("hKy9")}})]),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:i.iconShow,expression:"item.iconShow"}],staticClass:"detailList"},t._l(i.children,function(i,s){return e("li",{key:s,class:t.info.category==i.id?"active":"",on:{click:function(e){t.changecategory(i.id),t.getbycategorylist(s)}}},[t._v(t._s(i.title))])}))])})],2),t._v(" "),e("div",{staticClass:"clear"})])])],1),t._v(" "),e("div",{staticClass:"clear"})]),t._v(" "),e("div",{staticClass:"clear"})]),t._v(" "),e("ul",{staticClass:"btn"}),t._v(" "),e("main",[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottom,expression:"loadBottom"}],staticClass:"product",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"0"}},t._l(t.proList,function(i,s){return e("li",{key:s,on:{click:function(s){t.goproductdetail(i)}}},[e("img",{attrs:{src:i.avatar}}),t._v(" "),e("p",{staticClass:"price"},[t._v(t._s(i.score)),e("span",[t._v("购物积分")])]),t._v(" "),e("p",{staticClass:"info"},[t._v(t._s(i.title))])])}))])]),t._v(" "),e("foot",{attrs:{pageindex:t.pageindex}})],1)},staticRenderFns:[]};var l=s("VU/8")(c,r,!1,function(t){s("y3Jb")},"data-v-93efdfa6",null);i.default=l.exports},y3Jb:function(t,i){}});