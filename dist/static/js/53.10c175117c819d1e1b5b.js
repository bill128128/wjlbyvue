webpackJsonp([53],{"+hHo":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("CWUh"),a=e("BEg3"),s={name:"memberPoint",data:function(){return{title:"管理员拨分",userInfo:"",shopPoint:"",allInfo:{name:null,count:null},notes:"拨分记录"}},components:{top:o.a},beforeMount:function(){},created:function(){this.userInfo=JSON.parse(this.$route.query.userInfo),console.log(this.userInfo),this.getInfo()},methods:{golist:function(){this.$router.push("/memberPointList")},getInfo:function(){var t=this,n=window.localStorage.getItem("date");this.$axios.get(a.a+"/finance/user/memberShopint",{params:{accessToken:n}}).then(function(n){200==n.data.code?t.shopPoint=n.data.info:t.$toast({message:n.data.msg})}).catch(function(t){console.log(t)})},submit:function(){var t=this;if(null==this.allInfo.name||""==this.allInfo.name||0==this.allInfo.name.split(" ").join("").length)return this.$toast({message:"请填写被拨分下级用户名称"}),!1;if(null==this.allInfo.count||""==this.allInfo.count)return this.$toast({message:"请填写拨分额度"}),!1;if(parseFloat(this.allInfo.count)>parseFloat(this.shopPoint))return this.$toast({message:"您可拨购物积分不足"}),!1;console.log();var n=window.localStorage.getItem("date");this.$messagebox.confirm("您是否要给"+this.allInfo.name+"拨"+this.allInfo.count+"分").then(function(e){t.$Indicator.open("拨分中"),t.$axios.post(a.a+"/finance/user/memberPoints",{accessToken:n,shop_int:t.allInfo.count,username:t.allInfo.name}).then(function(n){t.$Indicator.close(),console.log(n.data),200==n.data.code&&(t.allInfo.count=null,t.allInfo.name=null,t.getInfo()),t.$toast({message:n.data.msg})}).catch(function(t){console.log(t)})}).catch(function(){})}}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"memberPoint"}},[e("top",{attrs:{message:t.title,notes:t.notes}}),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"member"},[e("div",{staticClass:"total"},[t._v("当前可拨购物积分总额："),e("span",[t._v(t._s(t.shopPoint))])]),t._v(" "),e("div",{staticClass:"money"},[e("span",{staticStyle:{"flex-wrap":"nowrap"}},[t._v("被拨分用户:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.allInfo.name,expression:"allInfo.name"}],attrs:{type:"text",placeholder:"请输入用户名称"},domProps:{value:t.allInfo.name},on:{input:function(n){n.target.composing||t.$set(t.allInfo,"name",n.target.value)}}})]),t._v(" "),e("div",{staticClass:"money"},[t._v("拨分额度:\n\t\t\t\t\t"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.allInfo.count,expression:"allInfo.count"}],attrs:{type:"number",placeholder:"请输入拨分额度"},domProps:{value:t.allInfo.count},on:{input:function(n){n.target.composing||t.$set(t.allInfo,"count",n.target.value)}}})]),t._v(" "),e("div",{staticClass:"button",on:{click:t.submit}},[t._v("拨分")])])])],1)},staticRenderFns:[]};var i=e("VU/8")(s,l,!1,function(t){e("NZei")},"data-v-7babc216",null);n.default=i.exports},NZei:function(t,n){}});