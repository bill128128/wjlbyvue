webpackJsonp([70],{"6nYp":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("d06Y");var o=s("CWUh"),a=s("IchT"),r={data:function(){return{pageindex:0,title:"线下自提",msgLength:0,msg:"",info:{count:0,id:0,type:0,self_lifting:2},prodetail:{},product:{},totalprice:0,totalscore:0,payCoverShow:!1,orderid:0}},components:{top:o.a,foot:a.a},watch:{msg:function(t){/[^\d]/g.test(t)?this.msg=this.msg.replace(/[^\d]/g,""):this.msgLength=t.length}},created:function(){this.isOverdue(),this.info.count=window.localStorage.getItem("pcount"),this.info.id=window.localStorage.getItem("pid"),this.info.type=window.localStorage.getItem("ptype"),this.orderConfirm()},methods:{isOverdue:function(){var t=this;this.$store.dispatch("isLogin/isLogin").then(function(){4e4==t.$store.state.isLogin.code&&(t.$toast({message:t.$store.state.isLogin.msg}),setInterval(function(){t.$router.push("/login")},2e3),window.localStorage.removeItem("date"))}).catch(function(t){console.log(t)})},showpassword:function(){console.log(this.msg)},showPayCover:function(){this.payCoverShow=!0},hidePayCover:function(){this.payCoverShow=!1},payframe:function(t){t.stopPropagation(),this.payCoverShow=!0},focus:function(){this.$refs.pwd.focus()},orderConfirm:function(){var t=this;this.$store.dispatch("makesureOrder/getprodetail",this.info).then(function(){200==t.$store.state.makesureOrder.code?(t.prodetail=t.$store.state.makesureOrder.product,t.product=t.$store.state.makesureOrder.prode,t.totalprice=parseFloat(t.product.price)*parseInt(t.info.count),t.totalscore=parseFloat(t.product.score)*parseInt(t.info.count)):t.$toast({message:t.$store.state.makesureOrder.msg})}).catch(function(t){console.log(t)})},doOrder:function(){var t=this;this.$store.dispatch("makesureOrder/doDownLine",this.info).then(function(){200==t.$store.state.makesureOrder.docode?(t.orderid=t.$store.state.makesureOrder.orderid,t.$toast({message:t.$store.state.makesureOrder.domsg}),t.payCoverShow=!0):t.$toast({message:t.$store.state.makesureOrder.domsg})}).catch(function(t){console.log(t)})},payOrder:function(){var t=this;this.$store.dispatch("makesureOrder/payOrder",[this.orderid,this.msg]).then(function(e){200==t.$store.state.makesureOrder.paycode?(t.$toast({message:t.$store.state.makesureOrder.paymsg}),window.localStorage.setItem("orderid",t.orderid),setTimeout(function(){t.$router.push("/paySuccess")},2e3)):t.$toast({message:t.$store.state.makesureOrder.paymsg}),t.msg=""})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"makeSureOrder"}},[s("top",{attrs:{message:t.title}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"commodity_information"},[s("div",{staticClass:"commodity"},[s("div",{staticClass:"goods"},[s("img",{attrs:{src:t.product.avatar,alt:"商品缩略图"}})]),t._v(" "),s("ul",{staticClass:"goods_info"},[s("li",[s("span",[t._v(t._s(t.product.price))]),t._v("招募积分"),s("span",[t._v("+"+t._s(t.product.score))]),t._v(" "),1==t.info.type?s("b",[t._v("招募红利")]):t._e(),2==t.info.type?s("b",[t._v("消费红利")]):t._e()]),t._v(" "),s("li",[t._v(t._s(t.product.title))]),t._v(" "),s("li",[s("span",[t._v("×"+t._s(t.info.count))]),t._v(" "),s("span",[t._v("包邮")])])])]),t._v(" "),s("div",{staticClass:"total"},[s("span",[t._v("合计金额： ")]),t._v(" "),s("span",[t._v(t._s(t.totalscore)+" ")]),t._v(" "),1==t.info.type?s("span",[t._v("招募红利")]):t._e(),2==t.info.type?s("span",[t._v("消费红利")]):t._e()])]),t._v(" "),s("div",{staticClass:"pay"},[s("p",[t._v("实付招募积分："),s("span",[t._v(t._s(t.totalprice))])]),t._v(" "),s("button",{staticClass:"submit",on:{click:t.doOrder}},[t._v("确认兑换")])])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.payCoverShow,expression:"payCoverShow"}],staticClass:"payCover",on:{click:t.hidePayCover}},[s("div",{staticClass:"payFrame",on:{click:t.payframe}},[s("div",{staticClass:"payCount"},[s("h2",[t._v("支付")]),t._v(" "),s("h2",[t._v("招募积分："),s("span",[t._v(t._s(t.totalprice))])]),t._v(" "),s("h2",[1==t.info.type?s("b",[t._v("招募红利")]):t._e(),2==t.info.type?s("b",[t._v("消费红利")]):t._e(),t._v("："),s("span",[t._v(t._s(t.totalscore))])])]),t._v(" "),s("div",{staticClass:"payPwd"},[t._v("\n\t                    支付密码：\n\t                     "),t._v(" "),s("div",{staticClass:"pwd-wrap"},[t._l(6,function(e){return s("div",{staticClass:"item"},[t._v(t._s(t.msg[e-1]))])}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{maxlength:"6",type:"password",autofocus:"autofocus"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}})],2)]),t._v(" "),s("button",{staticClass:"surePay",on:{click:t.payOrder}},[t._v("确认支付")])])])]),t._v(" "),s("foot",{attrs:{pageindex:t.pageindex}})],1)},staticRenderFns:[]};var n=s("VU/8")(r,i,!1,function(t){s("Z1Ws")},"data-v-2ebdb002",null);e.default=n.exports},Z1Ws:function(t,e){}});