webpackJsonp([24],{YqOZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAcCAYAAAC+lOV/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDhDOEFDQUJEMEVCMTFFODhEQzFBODU2QkVENkQ0NUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDhDOEFDQUNEMEVCMTFFODhEQzFBODU2QkVENkQ0NUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0OEJEN0Q5MEQwRUIxMUU4OERDMUE4NTZCRUQ2RDQ1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0OEJEN0Q5MUQwRUIxMUU4OERDMUE4NTZCRUQ2RDQ1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PurwTiMAAADTSURBVHjaYjQ2Nr7CwMDAAsQuZ8+efcJAAmCCalQH4gNAg2RI1ewCxHeBWJlUAxhBBFTDAagBIIMciPECI4xBjgGMyBxSDWBEFyDFACZ0AahCB7RAlCfKZhwueAp1wR2iNBNjACOh6MBnACMxiQGXAYzEpiZsBjCSkpbRDLjHxEAa4IBiEPjCRIKtKlBbpaFpwJuRTI3gVMdIrkZiEokckDqGTSPWtI0WsvtwacRpM7E5i6IsSZ3CgOxiiOwCkFyNsKjaQ45GmOY/QHyTVI0gABBgABgxjxXHzEgpAAAAAElFTkSuQmCC"},ryHf:function(e,t){},tcOX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("CWUh"),i("Au9i");var s=i("d06Y"),n=i.n(s),o={name:"modifyAddress",data:function(){return{value:!0,region:"",regionText:"北京市北京市东城区",province:"",city:"",county:"",regionVisible:!1,regionInit:!1,myAddressSlots:[{flex:1,values:this.getProvinceArr(),className:"slot1",textAlign:"center"},{divider:!0,content:"",className:"slot2"},{flex:1,values:this.getCityArr("北京市"),className:"slot3",textAlign:"center"},{divider:!0,content:"",className:"slot4"},{flex:1,values:this.getCountyArr("北京市","北京市"),className:"slot5",textAlign:"center"}],info:{userName:"",userMobile:"",type:1,userId:""},detailsAddress:"",provinceId:"",cityId:"",countyId:""}},created:function(){this.isOverdue(),this.getCountyArr("北京市","北京市"),this.getModifyAddress()},computed:{isType:function(){return this.value}},watch:{isType:function(){this.value?this.info.type=1:this.info.type=0}},methods:{isOverdue:function(){var e=this;this.$store.dispatch("isLogin/isLogin").then(function(){4e4==e.$store.state.isLogin.code&&(e.$toast({message:e.$store.state.isLogin.msg}),setInterval(function(){e.$router.push("/login")},2e3),window.localStorage.removeItem("date"))}).catch(function(e){console.log(e)})},showRegion:function(){this.regionVisible=!0},addressChange:function(e,t){this.regionInit?(this.regionText=t[0].name+" "+t[1].name+" "+t[2].name,this.province=t[0].name,this.city=t[1].name,this.county=t[2].name,e.setSlotValues(1,this.getCityArr(t[0].name)),e.setSlotValues(2,this.getCountyArr(t[0].name,t[1].name))):this.regionInit=!0},getProvinceArr:function(){var e=[];return n.a.forEach(function(t){var i={};i.name=t.name,i.id=t.id,e.push(i)}),e},getCityArr:function(e){var t=[];return n.a.forEach(function(i){i.name==e&&i.city.forEach(function(e){var i={};i.name=e.name,i.id=e.id,t.push(i)})}),t},getCountyArr:function(e,t){var i=[];return n.a.forEach(function(s){s.name==e&&s.city.forEach(function(e){e.name==t&&e.district.forEach(function(e){var t={};t.name=e.name,t.id=e.id,i.push(t)})})}),i},sure:function(){this.region=this.regionText,this.regionVisible=!1},cancel:function(){this.regionVisible=!1},gaBack:function(){this.$router.go(-1)},getProvinceId:function(e){for(var t=this.getProvinceArr(),i=0;i<t.length;i++)if(t[i].name==e)return t[i].id},getCityid:function(e,t){for(var i=this.getCityArr(e),s=0;s<i.length;s++)if(i[s].name==t)return i[s].id},getCountyId:function(e,t,i){for(var s=this.getCountyArr(e,t),n=0;n<s.length;n++)if(s[n].name==i)return s[n].id},getModifyAddress:function(){var e=JSON.parse(localStorage.getItem("address"));this.info.userName=e.consignee,this.info.userMobile=e.mobile,this.region=e.address_region,this.detailsAddress=e.address;var t=this.region.split(" ");this.province=t[0],this.city=t[1],this.county=t[2],this.info.userId=e.address_id},modifyAddress:function(){var e=this;this.provinceId=this.getProvinceId(this.province),this.cityId=this.getCityid(this.province,this.city),this.countyId=this.getCountyId(this.province,this.city,this.county),this.$store.dispatch("address/modifyAddress",[this.info,this.provinceId,this.cityId,this.countyId,this.detailsAddress]).then(function(){200==e.$store.state.address.modifyAddressCode?(e.$toast({message:e.$store.state.address.modifyAddressMsg}),setTimeout(function(){e.$router.push("/shop/shippingAddressList")},2e3)):e.$toast({message:e.$store.state.address.modifyAddressMsg})}).catch(function(e){console.log("添加新的收货地址失败")})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"modifyAddress"}},[s("header",{staticClass:"top"},[s("img",{attrs:{src:i("xniO")},on:{click:e.gaBack}}),e._v("\n            修改收货地址\n            "),s("span",{on:{click:e.modifyAddress}},[e._v("保存")])]),e._v(" "),s("form",{staticClass:"form",attrs:{action:""}},[s("label",[e._v("\n                收货人："),s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.userName,expression:"info.userName"}],attrs:{type:"text",placeholder:"请输入收货人姓名"},domProps:{value:e.info.userName},on:{input:function(t){t.target.composing||e.$set(e.info,"userName",t.target.value)}}})]),e._v(" "),s("label",[e._v("\n                手机号："),s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.userMobile,expression:"info.userMobile"}],attrs:{type:"text",placeholder:"请输入联系人手机号"},domProps:{value:e.info.userMobile},on:{input:function(t){t.target.composing||e.$set(e.info,"userMobile",t.target.value)}}})]),e._v(" "),s("label",{staticClass:"area"},[s("div",{staticClass:"select",on:{click:e.showRegion}},[e._v("\n                    所在区域：\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.region,expression:"region"}],attrs:{type:"text",readonly:""},domProps:{value:e.region},on:{input:function(t){t.target.composing||(e.region=t.target.value)}}}),e._v(" "),s("img",{attrs:{src:i("YqOZ"),alt:"more"}})]),e._v(" "),s("div",{staticClass:"bottom"},[e._v("\n                    详细地址："),s("input",{directives:[{name:"model",rawName:"v-model",value:e.detailsAddress,expression:"detailsAddress"}],attrs:{type:"text",placeholder:"请输入详细收货地址"},domProps:{value:e.detailsAddress},on:{input:function(t){t.target.composing||(e.detailsAddress=t.target.value)}}})])]),e._v(" "),s("label",{staticClass:"address"},[e._v("\n                设为默认地址\n                "),s("mt-switch",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),e._v(" "),s("mt-popup",{staticClass:"mtPopup",attrs:{position:"bottom"},model:{value:e.regionVisible,callback:function(t){e.regionVisible=t},expression:"regionVisible"}},[s("div",{staticClass:"button"},[s("span",{on:{click:e.sure}},[e._v("确定")]),e._v(" "),s("span",{on:{click:e.cancel}},[e._v("取消")])]),e._v(" "),s("mt-picker",{attrs:{valueKey:"name",visibleItemCount:5,slots:e.myAddressSlots},on:{change:e.addressChange}})],1)],1)},staticRenderFns:[]};var a=i("VU/8")(o,r,!1,function(e){i("ryHf")},"data-v-c8352d60",null);t.default=a.exports}});